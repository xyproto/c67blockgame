import "github.com/xyproto/c67game"
import sdl3 as sdl

BLOCK_SIZE := 20
PURPLE := 0xFF00FF

sdl.SDL_Init(sdl.SDL_INIT_VIDEO) or! {
    exitln("SDL Init failed!")
}
defer sdl.SDL_Quit()

window := sdl.SDL_CreateWindow("Draw Test", 320, 240, 0) or! {
    exitln("Window creation failed!")
}
defer sdl.SDL_DestroyWindow(window)

renderer := sdl.SDL_CreateRenderer(window, 0) or! {
    exitln("Renderer creation failed!")
}
defer sdl.SDL_DestroyRenderer(renderer)

clear_screen(renderer, 0x000000)

println("Drawing rectangles in loop...")

@ i in 0..<3 max 3 {
    @ j in 0..<3 max 3 {
        x := i * BLOCK_SIZE
        y := j * BLOCK_SIZE
        draw_rect(renderer, x, y, BLOCK_SIZE, BLOCK_SIZE, PURPLE)
    }
}

present(renderer)
delay(2000)

println("Done")
